MEMO

オブジェクトの管理方法
現在はオブジェクトの当たり判定は自動（オブジェクトIDが00でなければ当たったことにする）にしている
オブジェクトを下からたたいたときの動作に関してはコードを組むことで対応

・オブジェクトをたたけるかどうか
・そもそも特定のオブジェクトに触れたときの動作を定義できるようにしたい（ゴールポール、コイン、レンガブロック、地面ブロック）

・左右、上からオブジェクトに触れたときの関数
・下からオブジェクトに触れた（叩いた）ときの関数

コイン、地面→フラグAを0→オブジェクトに触れたときの関数設定は一つで済む
レンガブロック→フラグAを1→上・左右から、下から触れたときの関数を別に定義可能
この作業によって、当たり判定をなくしたり、アイテムを出したりすることも可能になる


＜現在の処理＞
４つのブロックを確認，それぞれの確認ルーチンにおいてオブジェクトの当たり判定の有無をチェック
４つのブロックにおいて，どのブロックを実際に衝突判定に使うか決定
上下左右のどれかの方位において位置をずらして衝突を解消

＜組みたい処理＞
４つのブロックを確認，それぞれ取得したブロックIDを保存
それぞれのブロックにおいて，当たり判定の有無をチェック
どのブロックを衝突判定に利用するかチェック
指定された関数を実行し衝突を解消

→ 衝突の解消には既存のコードを使用する
隠しブロックは処理が特殊（右下や左下からの衝突の際は衝突とみなさない）→分岐で処理
隠しブロックがあるとき，他のブロックとの衝突がないものとして組むと分岐処理が減る？
カスタム処理には，アニメーションやアイテムの処理などのみを含み衝突の解消は行わない


現在確認している当たり判定関係のバグ
- TODO: 1. 隣接した二つのブロックを同時に叩くことができる → ほかのブロックのアニメーション中にこのバグが起こると，アニメーション中のブロックの終了処理が正しく行われない
TODO: 2. actual_posの下位が6＆右を向いているとき，下から右側のブロックを叩くと，叩く動作と左に座標を修正する動作が同時に起こる
- TODO: 3. 隣接した?ブロックとレンガブロックを叩くとき，？ブロックを叩いたあとにレンガも叩けてしまう（同じ座標にいるがブロックの種類によって，左右どちらのブロックが叩けるか変化する）

1 -> 隣接したブロックを同時に叩けないようにする
2 -> ？
3 -> 隣接したブロックを叩く際の処理を確認する（同時に1も修正できそう）

1, 3は修正，2も修正した
2で座標の修正（ブロックの端にぶつかったとき，ブロックを叩かず座標を修正したい）

本家のマリオでは，上（叩く）と右（衝突）の判定がこの順に起こり，叩いて落下処理に入った後，壁から押し出され，速度が低下する

いったんは，マリオの座標が特定の範囲内なら座標の修正のみ行うようにしてみる